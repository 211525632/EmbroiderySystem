# A-Simple-Embroidery-system

## 简介:

【效果图……】


是一款基于Unity引擎与ObiRope插件实现的刺绣游戏

此项目尚未完成。

**当前进度：**

- 2025/2/17前:完成了**绳子的控制**与**针头吸附**的功能。
- 2024/2/17日:完成了**撤销**针线与**回忆**操作的功能。
- 2024/2/20日:完成一部分的Ui系统中的**层级管理**功能简介。



**备注:** 这个系统现在里面存在许多意义不明的类与资源

比如:TODO.cs 、TestCode文件夹中的代码(实际上是为了测试一些写法的正确性)

还有一些莫名奇妙的shader(也是学习用),忽略即可。

真正核心为***EmbroideryFramework***目录下的代码。

## 下载须知：
1. 由于本仓库中只有Asset的内容。由此你需要先创建一个Unity URP项目。
2. 插件需求：
   1. new Input system
3. layer设置
   1. 由于本项目使用了物理检测，并设置了layer
   2. 如果出现不能正常使用的情况。请添加以下layer(后续如果有其他layer的设置我会实时更新)![alt text](image.png)



## 项目目标：

- [x] 实现刺绣撤销操作
- [ ] 通过runtime的静态批处理，增加一个场景中的单位刺绣操作的次数上限
- [ ] 实现保存系统
- [ ] 自己Rope的模拟系统
- [ ] 实现刺绣数据的持久化
- [ ] 实现刺绣模型实时导出

## 功能简介：
**一. 撤销与回忆功能:**

**二. UI模块设计：**

1. ***实现目标***：
   - [x] 可以通过设置**UI层级**来快捷确定UI的覆盖情况
   - [ ] 深度理解Unity UI部分的知识
   - [x] 使用专用相机来渲染UI
   - [ ] 使用**栈**来存储UI显示的模块。通过栈来实现退出、回溯
   - [x] 使用**对象池**与**快照**来优化UI显示与加载 (对象池已完成)
   - [ ] 使用**AB包**实现对UI的便捷加载。
   - [ ] 尝试使用**MVC框架**来组织整个UI模块
   - [ ] 完成UI的**动静分离**优化UI更新时的开销
   - [ ] 实现UI的**动画支持**
   - [x] 支持使用Lua脚本实现Ui集合特殊效果
 - 其他目标：
   - [ ] 尝试使用**打图集**的方式来优化UI的加载与重绘并理解这样做的目的
   - [ ] 学习并尝试利用**减少DrawCall**的方式来编排整个UI层
  
2. Ui系统业务层介绍:
   1. unityEditor层面:
      - 将Ui制作成预制体。制作预制体须知：
           1. 需要将相关的基础脚本挂载在Ui下,例如: `UiButton`、`UiText`.使用添加脚本的方式来对特殊Ui进行标注
           2. 所有的Ui无需包含新的Canvas组件。但是需要在根物体上挂载`UiCollection`组件。来表示其下Ui为一个整体
           3. 所有的Ui都是使用**名称**为key的映射方式。请注意Ui命名情况。        
           4. 在`UiCollection`组件上标记luaTable在G表中的相对位置
      - 使用Ab包进行打包。注意分类
   2. 脚本层面：
      - 定制化特殊Ui效果：
        1. 向`LuaUiSetting.lua`脚本中添加目标脚本的require
        2. 通过lua脚本,对`LuaBasicUiAction （luaTable）`进行继承。重写其中的函数，实现特殊功能。
   3. 框架介绍：
   


## Pool对象池系统

### 自动删除模块简单架构：
![alt text](image-1.png)

## 待解决问题：
- [ ] 每个针脚都不是严格意义上的链接在一起，需要在针脚改变mesh或者添加仿真模型来完成。

## 待修BUG：
- [ ] 修改针头触发不灵敏,容易针头穿过之后任然没有触发判定
- [x] 修改撤销操作之后，针不改变上下位置的BUG（其实不是BUG，是设计上的问题）
    - 解决方式：将撤销设置成连续撤销两次来规避这个问题。（无论是键鼠操作还是VR操作都需要规避这个问题）


